syntax = "proto3";

package business;
option java_multiple_files = true;
option java_package = "com.sep3.business.grpc";
option java_outer_classname = "BusinessProto";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

    syntax = "proto3";

package business;
option java_multiple_files = true;
option java_package = "com.sep3.business.grpc";
option java_outer_classname = "BusinessProto";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

// ===== Models =====
message User {
  int64 id = 1;
  string email = 2;
  string password = 3;
  string displayName = 4;
}

message Board {
  int32 id = 1;
  string name = 2;
  string owner = 3;
}

message Column {
  int32 id = 1;
  string title = 2;
  int32 boardId = 3;
}

message Task {
  int32 id = 1;
  string title = 2;
  string description = 3;
  int32 columnId = 4;
  google.protobuf.Timestamp createdAt = 5;
  google.protobuf.Timestamp updatedAt = 6;
}

// ===== Requests / Responses =====
message AddUserRequest{
  int64 id = 1;
  string email = 2;
  string password = 3;
  string displayName = 4;
}

message AddUserResponse{
  User user = 1;
}

message CreateBoardRequest {
  string name = 1;
  string owner = 2;
}

message BoardResponse {
  Board board = 1;
}

message GetBoardRequest {
  int32 id = 1;
}

message AddTaskRequest {
  int32 columnId = 1;
  string title = 2;
  string description = 3;
}

message TaskResponse {
  Task task = 1;
}

message MoveTaskRequest {
  int32 taskId = 1;
  int32 targetColumnId = 2;
}

// ===== Service exposed to client =====
service KanbanBusinessService {
  rpc AddUser (AddUserRequest) returns (AddUserResponse);

  rpc CreateBoard (CreateBoardRequest) returns (BoardResponse);
  rpc GetBoard (GetBoardRequest) returns (BoardResponse);
  rpc AddTask (AddTaskRequest) returns (TaskResponse);
  rpc MoveTask (MoveTaskRequest) returns (google.protobuf.Empty);
  rpc DeleteTask (TaskResponse) returns (google.protobuf.Empty);
}